<mat-card class="new-transaction-form" role="form" aria-labelledby="transaction-title">
  <h3 id="transaction-title" class="title">Nova Transação</h3>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label for="transaction-type">Tipo de transação:</mat-label>
    <mat-select id="transaction-type" [(ngModel)]="transactionType" aria-label="Selecionar tipo de transação">
      <mat-option [value]="'Received'">Depósito</mat-option>
      <mat-option [value]="'Sent'">Transferência</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" class="input-middle">
    <mat-label for="amount-field">Valor:</mat-label>
    <input matInput id="amount-field" type="text" mask="separator.2" thousandSeparator="." decimalMarker=","
      prefix="R$ " [ngModel]="amount" (ngModelChange)="amount = $event" aria-label="Valor da transação em reais" />
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label for="description-field">Descrição:</mat-label>
    <input matInput id="description-field" type="text" [(ngModel)]="description"
      placeholder="Digite uma descrição para a transação" maxlength="100" (input)="onDescriptionChange()"
      aria-describedby="description-hint" aria-label="Descrição da transação" />
    <mat-hint id="description-hint" align="end">{{ description.length || 0 }}/100</mat-hint>
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label for="category-field">Categoria:</mat-label>
    <input matInput id="category-field" type="text" [value]="category" readonly
      placeholder="Categoria será detectada automaticamente"
      aria-label="Categoria da transação (detectada automaticamente)" />
    <mat-icon matSuffix *ngIf="isLoadingCategory" class="loading-icon" aria-hidden="true">hourglass_empty</mat-icon>
    <mat-icon matSuffix *ngIf="!isLoadingCategory && category" class="category-icon"
      aria-hidden="true">category</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="outline" class="input-middle">
    <mat-label for="date-field">Data</mat-label>
    <input matInput id="date-field" [matDatepicker]="picker" [(ngModel)]="transactionDate"
      placeholder="Escolha uma data" aria-label="Data da transação" />
    <mat-datepicker-toggle matSuffix [for]="picker" aria-label="Abrir seletor de data"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <mat-form-field appearance="outline" class="input-middle" (click)="fileInput.click()" style="cursor: pointer;">
    <mat-label for="file-field">Comprovante</mat-label>
    <input matInput id="file-field" [value]="selectedFileName || ''" readonly
      placeholder="Clique para anexar um arquivo" aria-label="Anexar comprovante da transação">
    <mat-icon matSuffix aria-hidden="true">attach_file</mat-icon>
    <input hidden (change)="onFileSelected($event)" #fileInput type="file"
      aria-label="Selecionar arquivo de comprovante" />
  </mat-form-field>

  <button mat-flat-button color="primary" class="submit-btn input-middle"
    [disabled]="!transactionType || amount === null || !transactionDate || !description" (click)="submitTransaction()"
    aria-label="Enviar transação">
    Enviar
  </button>
</mat-card>